# Remote Monitoring Center Application
# 模拟远程监控中心应用程序

## 概述

本应用程序是一个基于 PyQt5 的远程监控中心模拟系统，使用 Redis 发布/订阅机制实现实时数据监控和控制指令发送。

## 功能特性

### 界面布局

#### 顶部控制区域

**左侧配置面板：**
- 服务器地址输入框（默认：localhost）
- 服务器端口输入框（默认：8899）
- 两个选项卡按钮：
  - 设备状态信息
  - 查询记录

**右侧控制面板：**
- 启动服务 - 连接到 Redis 服务器并开始监听
- 停止服务 - 断开 Redis 连接
- 信息确认 - 确认当前监控信息
- 信息恢复 - 恢复历史信息
- 远程查询 - 执行远程查询请求
- 清除 - 清空显示区域

#### 中央显示区域
- 大型文本显示区域，实时显示：
  - 监控数据
  - 日志信息
  - 查询结果
- 支持滚动显示
- 浅色背景，便于阅读

## 技术实现

### 技术栈
- **前端**: PyQt5 (基于 Qt 5.15.2)
- **后台通信**: Redis 发布/订阅机制
- **编程语言**: Python 3

### 数据流向
1. 订阅 Redis 频道接收实时监控数据
2. 通过 Redis 发布控制指令
3. 实时更新界面显示

### Redis 频道说明

**订阅频道：**
- `monitoring_data` - 实时监控数据
- `device_status` - 设备状态信息
- `query_results` - 查询结果

**发布频道：**
- `control_commands` - 控制指令（确认、恢复等）
- `query_requests` - 查询请求

## 安装和运行

### 环境要求
- Python 3.7+
- Redis Server

### 安装依赖

```bash
pip install -r requirements.txt
```

### 启动 Redis 服务器

```bash
# 默认端口 6379
redis-server

# 自定义端口（例如 8899）
redis-server --port 8899
```

### 运行应用程序

```bash
python monitoring_center.py
```

## 使用说明

1. **启动应用**
   - 运行 `python monitoring_center.py`
   - 应用窗口将打开

2. **配置连接**
   - 输入 Redis 服务器地址（默认：localhost）
   - 输入 Redis 服务器端口（默认：8899）

3. **启动服务**
   - 点击"启动服务"按钮
   - 系统将连接到 Redis 并开始监听消息
   - 连接成功后会显示设备状态信息

4. **使用功能**
   - **切换选项卡**: 点击"设备状态信息"或"查询记录"切换视图
   - **信息确认**: 确认当前显示的监控信息
   - **信息恢复**: 恢复之前的信息状态
   - **远程查询**: 执行远程数据查询
   - **清除**: 清空显示区域的所有内容

5. **停止服务**
   - 点击"停止服务"按钮断开连接
   - 或直接关闭窗口

## 项目结构

```
shusan/
├── monitoring_center.py      # 主应用程序
├── requirements.txt           # Python 依赖
├── README.md                  # 项目说明（本文件）
└── 地铁应急疏散控制器联动方案.md  # 系统方案文档
```

## 开发说明

### 主要类

**RedisListener**
- 负责 Redis 发布/订阅连接
- 在独立线程中运行，避免阻塞 UI
- 发出信号通知主窗口接收到的消息

**MonitoringCenterApp**
- 主应用窗口
- 管理 UI 组件和用户交互
- 处理 Redis 消息和控制逻辑

### 扩展功能

如需添加新的监控功能：

1. 在 `RedisListener` 中订阅新的频道
2. 在 `on_redis_message` 方法中处理新的消息类型
3. 根据需要添加新的 UI 控件和处理函数

## 注意事项

- 确保 Redis 服务器在启动应用前已运行
- 默认端口为 8899，如使用其他端口请相应修改
- 应用程序会模拟一些设备状态数据用于演示
- 实际部署时需要连接真实的监控设备数据源

## 许可证

本项目遵循仓库许可证。

## 作者

jiasondouble

## 版本历史

- v1.0 (2025-12-08) - 初始版本
  - 实现基本 GUI 界面
  - Redis 发布/订阅集成
  - 设备状态监控
  - 查询记录功能
